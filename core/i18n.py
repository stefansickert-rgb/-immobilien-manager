from __future__ import annotations
import streamlit as st

LANGS = ["de", "en", "fr", "es"]

TRANSLATIONS = {
    "de": {
        # global
        "app_title": "Property Manager",
        "choose_section": "Bereich w√§hlen",
        "local_data_hint": "Daten liegen lokal in data.db. Zum Sichern: Datei kopieren oder Export nutzen.",
        "save": "Speichern", "delete": "L√∂schen", "select": "Ausw√§hlen",
        "created": "Angelegt.", "changes_saved": "Gespeichert.", "deleted": "Gel√∂scht.",
        "not_available": "Noch keine Daten vorhanden.", "please_enter_name": "Bitte einen Namen angeben.",
        "german": "Deutsch", "english": "Englisch", "french": "Franz√∂sisch", "spanish": "Spanisch",
        # dashboard
        "dashboard": "Dashboard", "overview": "√úberblick",
        "properties_count": "Objekte", "units_count": "Wohnungen", "active_leases": "Aktive Mietvertr√§ge",
        "rent_sum": "Kaltmiete/Monat (‚àë)", "latest_payments": "Letzte Zahlungen",
        # settings
        "settings": "Einstellungen", "language": "Sprache", "language_changed": "Sprache umgestellt.",
        # properties
        "properties": "Objekte", "property_overview": "Objekt√ºbersicht",
        "create_property": "Neues Objekt anlegen", "edit_delete_property": "Objekt bearbeiten / l√∂schen",
        "name": "Name", "address": "Adresse", "postal_code": "PLZ", "city": "Ort",
        "purchase_price": "Kaufpreis (‚Ç¨)", "size_sqm": "Fl√§che (m¬≤)", "notes": "Notizen",
        "select_property": "Objekt w√§hlen", "no_properties": "Noch keine Objekte vorhanden.",
        "cannot_delete_units": "L√∂schen nicht m√∂glich: Es sind noch Wohnungen verkn√ºpft.",
        "actions_hint": "Aktionen: ‚ûï neues Objekt ¬∑ üõ†Ô∏è bearbeiten/l√∂schen (Hover f√ºr Erkl√§rung)",
        # units
        "units": "Wohnungen", "new_unit": "Neue Wohnung anlegen", "edit_delete_unit": "Wohnung bearbeiten / l√∂schen",
        "property": "Objekt", "unit_label": "Wohnungsbezeichnung", "rooms": "Zimmer",
        "living_area_sqm": "Wohnfl√§che (m¬≤)", "rent_cold_current": "aktuelle Kaltmiete (‚Ç¨)", "is_rented": "vermietet",
        "no_units": "Noch keine Wohnungen vorhanden.", "select_unit": "Wohnung w√§hlen",
        # tenants
        "tenants": "Mieter", "new_tenant": "Neuen Mieter anlegen", "edit_delete_tenant": "Mieter bearbeiten / l√∂schen",
        "full_name": "Vollst√§ndiger Name", "phone": "Telefon", "email": "E-Mail", "no_tenants": "Noch keine Mieter vorhanden.",
        "select_tenant": "Mieter w√§hlen",
        # leases
        "leases": "Mietvertr√§ge", "new_lease": "Neuen Mietvertrag anlegen",
        "select_lease": "Mietvertrag w√§hlen", "end_lease_today": "Mietvertrag beenden (heute)", "delete_lease": "Mietvertrag l√∂schen",
        "unit": "Wohnung", "tenant": "Mieter", "start_date": "Startdatum", "end_date_optional": "Ende (optional)",
        "rent_cold": "Kaltmiete (‚Ç¨)", "rent_warm": "Warmmiete (‚Ç¨)", "deposit": "Kaution (‚Ç¨)",
        "no_leases": "Noch keine Mietvertr√§ge vorhanden.", "need_units_tenants_first": "Bitte zuerst Wohnungen und Mieter anlegen.",
        # payments
        "payments": "Zahlungen", "record_payment": "Zahlung erfassen", "date": "Datum", "amount": "Betrag (‚Ç¨)",
        "category": "Kategorie", "note": "Notiz", "payment_recorded": "Zahlung erfasst.",
        "need_lease_first": "Bitte zuerst einen Mietvertrag anlegen.",
        "cat_rent": "Miete", "cat_nk": "NK", "cat_deposit": "Kaution", "cat_other": "Sonstiges",
        # tasks
        "tasks": "Wartung & Aufgaben", "new_task": "Neue Aufgabe", "edit_delete_task": "Aufgabe aktualisieren / l√∂schen",
        "status": "Status", "due_date": "F√§llig am", "cost_estimate": "Kosten (gesch√§tzt)", "task_title": "Titel",
        "select_task": "Aufgabe w√§hlen", "no_tasks": "Noch keine Aufgaben vorhanden.",
        "status_open": "offen", "status_in_progress": "in Arbeit", "status_done": "erledigt",
        # export
        "export": "Export / Backup", "export_desc": "Exportiert alle Tabellen in eine Excel-Datei mit mehreren Sheets.",
        "download_excel": "Excel herunterladen",
        "user_account": "Nutzerkonto",
        "first_name": "Vorname",
        "last_name": "Nachname",
        "email": "E-Mail",
        "profile_saved": "Profil gespeichert.",
        "edit_profile": "Profil bearbeiten",
        "avatar": "Profilbild",
        "upload_photo": "Bild hochladen (PNG/JPG)",
        "remove_photo": "Bild entfernen",
        "photo_saved": "Bild gespeichert.",
        "photo_removed": "Bild entfernt.",
        "invalid_image": "Ung√ºltige Bilddatei.",
        "greet_morning": "Guten Morgen",
        "greet_afternoon": "Guten Tag",
        "greet_evening": "Guten Abend",
        "greet_night": "Gute Nacht",
        "spring": "Fr√ºhling", "summer": "Sommer", "autumn": "Herbst", "winter": "Winter",
        "season_greeting": "Sch√∂nen {season}!",
        "year_built": "Baujahr",
        "ownership_transfer_date": "Eigentums√ºbergang",
        "balcony": "Balkon",
        "cellar": "Keller",
        "storage_room": "Abstellraum",
        "garage": "Garage",
        "parking_spot": "PKW-Stellplatz",
        "owned_by_me": "In meinem Eigentum",
        "financings": "Finanzierungen",
        "financing": "Finanzierung",
        "new_financing": "Neue Finanzierung",
        "edit_delete_financing": "Finanzierung beenden / l√∂schen",
        "lender_name": "Kreditgeber",
        "loan_number": "Darlehensnummer",
        "principal_amount": "Darlehenssumme",
        "interest_rate": "Sollzins (%)",
        "repayment_rate": "Tilgung (%)",
        "monthly_payment": "Monatsrate",
        "fixed_rate_until": "Zinsbindung bis",
        "remaining_balance": "Restschuld",
        "purpose": "Verwendungszweck",
        "collateral": "Sicherheit",
        "select_financing": "Finanzierung ausw√§hlen",
        "end_financing_today": "Finanzierung beenden (heute)",
        "delete_financing": "Finanzierung l√∂schen",


    },
    "en": {
        "app_title": "Property Manager", "choose_section": "Choose section",
        "local_data_hint": "Data is stored locally in data.db. Backup: copy file or use Export.",
        "save": "Save", "delete": "Delete", "select": "Select", "created": "Created.", "changes_saved": "Saved.", "deleted": "Deleted.",
        "not_available": "No data yet.", "please_enter_name": "Please enter a name.",
        "german": "German", "english": "English", "french": "French", "spanish": "Spanish",
        "dashboard": "Dashboard", "overview": "Overview", "properties_count": "Properties", "units_count": "Units",
        "active_leases": "Active leases", "rent_sum": "Cold rent / month (‚àë)", "latest_payments": "Latest payments",
        "settings": "Settings", "language": "Language", "language_changed": "Language updated.",
        "properties": "Properties", "property_overview": "Property overview",
        "create_property": "Create new property", "edit_delete_property": "Edit / delete property",
        "name": "Name", "address": "Address", "postal_code": "Postal code", "city": "City",
        "purchase_price": "Purchase price (‚Ç¨)", "size_sqm": "Size (sqm)", "notes": "Notes",
        "select_property": "Select property", "no_properties": "No properties yet.",
        "cannot_delete_units": "Cannot delete: units are linked.", "actions_hint": "Actions: ‚ûï add ¬∑ üõ†Ô∏è edit/delete (hover for help)",
        "units": "Units", "new_unit": "Add new unit", "edit_delete_unit": "Edit / delete unit",
        "property": "Property", "unit_label": "Unit label", "rooms": "Rooms", "living_area_sqm": "Living area (sqm)",
        "rent_cold_current": "current cold rent (‚Ç¨)", "is_rented": "rented", "no_units": "No units yet.", "select_unit": "Select unit",
        "tenants": "Tenants", "new_tenant": "Add new tenant", "edit_delete_tenant": "Edit / delete tenant",
        "full_name": "Full name", "phone": "Phone", "email": "Email", "no_tenants": "No tenants yet.", "select_tenant": "Select tenant",
        "leases": "Leases", "new_lease": "Create new lease", "select_lease": "Select lease",
        "end_lease_today": "End lease (today)", "delete_lease": "Delete lease",
        "unit": "Unit", "tenant": "Tenant", "start_date": "Start date", "end_date_optional": "End (optional)",
        "rent_cold": "Cold rent (‚Ç¨)", "rent_warm": "Warm rent (‚Ç¨)", "deposit": "Deposit (‚Ç¨)",
        "no_leases": "No leases yet.", "need_units_tenants_first": "Please create units and tenants first.",
        "payments": "Payments", "record_payment": "Record payment", "date": "Date",
        "amount": "Amount (‚Ç¨)", "category": "Category", "note": "Note", "payment_recorded": "Payment recorded.",
        "need_lease_first": "Please create a lease first.",
        "cat_rent": "Rent", "cat_nk": "Service charges", "cat_deposit": "Deposit", "cat_other": "Other",
        "tasks": "Maintenance & Tasks", "new_task": "New task", "edit_delete_task": "Update / delete task",
        "status": "Status", "due_date": "Due date", "cost_estimate": "Cost estimate", "task_title": "Title",
        "select_task": "Select task", "no_tasks": "No tasks yet.",
        "status_open": "open", "status_in_progress": "in progress", "status_done": "done",
        "export": "Export / Backup", "export_desc": "Exports all tables to a multi-sheet Excel file.", "download_excel": "Download Excel",
        "user_account": "User account",
        "first_name": "First name",
        "last_name": "Last name",
        "email": "Email",
        "profile_saved": "Profile saved.",
        "edit_profile": "Edit profile",
        "avatar": "Profile picture",
        "upload_photo": "Upload image (PNG/JPG)",
        "remove_photo": "Remove image",
        "photo_saved": "Photo saved.",
        "photo_removed": "Photo removed.",
        "invalid_image": "Invalid image file.",
        "greet_morning": "Good morning",
        "greet_afternoon": "Good afternoon",
        "greet_evening": "Good evening",
        "greet_night": "Good night",
        "spring": "spring", "summer": "summer", "autumn": "autumn", "winter": "winter",
        "season_greeting": "Have a great {season}!",
        "year_built": "Year built",
        "ownership_transfer_date": "Ownership transfer date",
        "balcony": "Balcony",
        "cellar": "Cellar",
        "storage_room": "Storage room",
        "garage": "Garage",
        "parking_spot": "Parking spot",
        "owned_by_me": "Owned by me",
        "financings": "Financings",
        "financing": "Financing",
        "new_financing": "New financing",
        "edit_delete_financing": "End / delete financing",
        "lender_name": "Lender",
        "loan_number": "Loan number",
        "principal_amount": "Principal",
        "interest_rate": "Interest rate (%)",
        "repayment_rate": "Repayment (%)",
        "monthly_payment": "Monthly payment",
        "fixed_rate_until": "Fixed rate until",
        "remaining_balance": "Remaining balance",
        "purpose": "Purpose",
        "collateral": "Collateral",
        "select_financing": "Select financing",
        "end_financing_today": "End financing (today)",
        "delete_financing": "Delete financing",



    },
    "fr": {
        "app_title": "Gestion Immobili√®re", "choose_section": "Choisir une section",
        "local_data_hint": "Les donn√©es sont locales (data.db). Sauvegarde : copier le fichier ou utiliser Export.",
        "save": "Enregistrer", "delete": "Supprimer", "select": "Choisir",
        "created": "Cr√©√©.", "changes_saved": "Enregistr√©.", "deleted": "Supprim√©.",
        "not_available": "Aucune donn√©e pour l‚Äôinstant.", "please_enter_name": "Veuillez saisir un nom.",
        "german": "Allemand", "english": "Anglais", "french": "Fran√ßais", "spanish": "Espagnol",
        "dashboard": "Tableau de bord", "overview": "Aper√ßu", "properties_count": "Biens",
        "units_count": "Logements", "active_leases": "Baux actifs", "rent_sum": "Loyer hors charges / mois (‚àë)",
        "latest_payments": "Derniers paiements", "settings": "Param√®tres", "language": "Langue", "language_changed": "Langue mise √† jour.",
        "properties": "Biens", "property_overview": "Aper√ßu des biens",
        "create_property": "Cr√©er un bien", "edit_delete_property": "Modifier / supprimer un bien",
        "name": "Nom", "address": "Adresse", "postal_code": "Code postal", "city": "Ville",
        "purchase_price": "Prix d‚Äôachat (‚Ç¨)", "size_sqm": "Surface (m¬≤)", "notes": "Notes",
        "select_property": "Choisir un bien", "no_properties": "Aucun bien pour le moment.",
        "cannot_delete_units": "Suppression impossible : des logements sont li√©s.",
        "actions_hint": "Actions : ‚ûï ajouter ¬∑ üõ†Ô∏è modifier/supprimer (survol pour l‚Äôaide)",
        "units": "Logements", "new_unit": "Cr√©er un logement", "edit_delete_unit": "Modifier / supprimer un logement",
        "property": "Bien", "unit_label": "Libell√© du logement", "rooms": "Pi√®ces",
        "living_area_sqm": "Surface habitable (m¬≤)", "rent_cold_current": "loyer hors charges actuel (‚Ç¨)", "is_rented": "lou√©",
        "no_units": "Aucun logement pour l‚Äôinstant.", "select_unit": "Choisir un logement",
        "tenants": "Locataires", "new_tenant": "Cr√©er un locataire", "edit_delete_tenant": "Modifier / supprimer un locataire",
        "full_name": "Nom complet", "phone": "T√©l√©phone", "email": "E-mail", "no_tenants": "Aucun locataire.", "select_tenant": "Choisir un locataire",
        "leases": "Baux", "new_lease": "Cr√©er un bail", "select_lease": "Choisir un bail",
        "end_lease_today": "Clore le bail (aujourd‚Äôhui)", "delete_lease": "Supprimer le bail",
        "unit": "Logement", "tenant": "Locataire", "start_date": "D√©but", "end_date_optional": "Fin (optionnel)",
        "rent_cold": "Loyer HC (‚Ç¨)", "rent_warm": "Loyer CC (‚Ç¨)", "deposit": "D√©p√¥t de garantie (‚Ç¨)",
        "no_leases": "Aucun bail.", "need_units_tenants_first": "Cr√©ez d‚Äôabord des logements et des locataires.",
        "payments": "Paiements", "record_payment": "Saisir un paiement", "date": "Date",
        "amount": "Montant (‚Ç¨)", "category": "Cat√©gorie", "note": "Note", "payment_recorded": "Paiement enregistr√©.",
        "need_lease_first": "Cr√©ez d‚Äôabord un bail.",
        "cat_rent": "Loyer", "cat_nk": "Charges", "cat_deposit": "D√©p√¥t", "cat_other": "Autre",
        "tasks": "Maintenance & T√¢ches", "new_task": "Nouvelle t√¢che", "edit_delete_task": "Mettre √† jour / supprimer la t√¢che",
        "status": "Statut", "due_date": "√âch√©ance", "cost_estimate": "Co√ªt estim√©", "task_title": "Titre",
        "select_task": "Choisir une t√¢che", "no_tasks": "Aucune t√¢che.",
        "status_open": "ouvert", "status_in_progress": "en cours", "status_done": "termin√©",
        "export": "Export / Sauvegarde", "export_desc": "Exporte toutes les tables dans un fichier Excel multi-feuilles.",
        "download_excel": "T√©l√©charger l‚ÄôExcel",
        "user_account": "Compte utilisateur",
        "first_name": "Pr√©nom",
        "last_name": "Nom",
        "email": "E-mail",
        "profile_saved": "Profil enregistr√©.",
        "edit_profile": "Modifier le profil",
        "avatar": "Photo de profil",
        "upload_photo": "T√©l√©verser une image (PNG/JPG)",
        "remove_photo": "Supprimer l‚Äôimage",
        "photo_saved": "Image enregistr√©e.",
        "photo_removed": "Image supprim√©e.",
        "invalid_image": "Fichier image invalide.",
        "greet_morning": "Bonjour",
        "greet_afternoon": "Bon apr√®s-midi",
        "greet_evening": "Bonsoir",
        "greet_night": "Bonne nuit",
        "spring": "printemps", "summer": "√©t√©", "autumn": "automne", "winter": "hiver",
        "season_greeting": "Bon {season} !",
        "year_built": "Ann√©e de construction",
        "ownership_transfer_date": "Date de transfert de propri√©t√©",
        "balcony": "Balcon",
        "cellar": "Cave",
        "storage_room": "D√©barras",
        "garage": "Garage",
        "parking_spot": "Place de parking",
        "owned_by_me": "En ma propri√©t√©",
        "financings": "Financements",
        "financing": "Financement",
        "new_financing": "Nouveau financement",
        "edit_delete_financing": "Terminer / supprimer le financement",
        "lender_name": "Pr√™teur",
        "loan_number": "Num√©ro de pr√™t",
        "principal_amount": "Montant du pr√™t",
        "interest_rate": "Taux d‚Äôint√©r√™t (%)",
        "repayment_rate": "Amortissement (%)",
        "monthly_payment": "Paiement mensuel",
        "fixed_rate_until": "Taux fixe jusqu‚Äôau",
        "remaining_balance": "Solde restant",
        "purpose": "Objet",
        "collateral": "Garantie",
        "select_financing": "S√©lectionner un financement",
        "end_financing_today": "Terminer le financement (aujourd‚Äôhui)",
        "delete_financing": "Supprimer le financement",



    },
    "es": {
        "app_title": "Gestor de Inmuebles", "choose_section": "Elegir secci√≥n",
        "local_data_hint": "Los datos se guardan localmente en data.db. Copia: copiar archivo o usar Exportar.",
        "save": "Guardar", "delete": "Eliminar", "select": "Seleccionar",
        "created": "Creado.", "changes_saved": "Guardado.", "deleted": "Eliminado.",
        "not_available": "No hay datos todav√≠a.", "please_enter_name": "Introduce un nombre.",
        "german": "Alem√°n", "english": "Ingl√©s", "french": "Franc√©s", "spanish": "Espa√±ol",
        "dashboard": "Panel", "overview": "Resumen", "properties_count": "Inmuebles",
        "units_count": "Unidades", "active_leases": "Contratos activos", "rent_sum": "Renta fr√≠a / mes (‚àë)",
        "latest_payments": "√öltimos pagos", "settings": "Ajustes", "language": "Idioma", "language_changed": "Idioma actualizado.",
        "properties": "Inmuebles", "property_overview": "Resumen de inmuebles",
        "create_property": "Crear inmueble", "edit_delete_property": "Editar / eliminar inmueble",
        "name": "Nombre", "address": "Direcci√≥n", "postal_code": "C√≥digo postal", "city": "Ciudad",
        "purchase_price": "Precio de compra (‚Ç¨)", "size_sqm": "Superficie (m¬≤)", "notes": "Notas",
        "select_property": "Seleccionar inmueble", "no_properties": "A√∫n no hay inmuebles.",
        "cannot_delete_units": "No se puede eliminar: hay unidades vinculadas.",
        "actions_hint": "Acciones: ‚ûï a√±adir ¬∑ üõ†Ô∏è editar/eliminar (ayuda al pasar el rat√≥n)",
        "units": "Unidades", "new_unit": "Crear unidad", "edit_delete_unit": "Editar / eliminar unidad",
        "property": "Inmueble", "unit_label": "Etiqueta de unidad", "rooms": "Habitaciones",
        "living_area_sqm": "Superficie habitable (m¬≤)", "rent_cold_current": "renta fr√≠a actual (‚Ç¨)", "is_rented": "alquilado",
        "no_units": "No hay unidades.", "select_unit": "Seleccionar unidad",
        "tenants": "Inquilinos", "new_tenant": "Crear inquilino", "edit_delete_tenant": "Editar / eliminar inquilino",
        "full_name": "Nombre completo", "phone": "Tel√©fono", "email": "Email", "no_tenants": "No hay inquilinos.", "select_tenant": "Seleccionar inquilino",
        "leases": "Contratos", "new_lease": "Crear contrato", "select_lease": "Seleccionar contrato",
        "end_lease_today": "Terminar contrato (hoy)", "delete_lease": "Eliminar contrato",
        "unit": "Unidad", "tenant": "Inquilino", "start_date": "Inicio", "end_date_optional": "Fin (opcional)",
        "rent_cold": "Renta fr√≠a (‚Ç¨)", "rent_warm": "Renta c√°lida (‚Ç¨)", "deposit": "Dep√≥sito (‚Ç¨)",
        "no_leases": "No hay contratos.", "need_units_tenants_first": "Crea primero unidades e inquilinos.",
        "payments": "Pagos", "record_payment": "Registrar pago", "date": "Fecha",
        "amount": "Importe (‚Ç¨)", "category": "Categor√≠a", "note": "Nota", "payment_recorded": "Pago registrado.",
        "need_lease_first": "Crea primero un contrato.",
        "cat_rent": "Renta", "cat_nk": "Gastos", "cat_deposit": "Dep√≥sito", "cat_other": "Otro",
        "tasks": "Mantenimiento y Tareas", "new_task": "Nueva tarea", "edit_delete_task": "Actualizar / eliminar tarea",
        "status": "Estado", "due_date": "Vence", "cost_estimate": "Costo estimado", "task_title": "T√≠tulo",
        "select_task": "Seleccionar tarea", "no_tasks": "No hay tareas.",
        "status_open": "abierta", "status_in_progress": "en curso", "status_done": "hecha",
        "export": "Exportar / Copia", "export_desc": "Exporta todas las tablas a un Excel con varias hojas.",
        "download_excel": "Descargar Excel",
        "user_account": "Cuenta de usuario",
        "first_name": "Nombre",
        "last_name": "Apellido",
        "email": "Correo electr√≥nico",
        "profile_saved": "Perfil guardado.",
        "edit_profile": "Editar perfil",
        "avatar": "Foto de perfil",
        "upload_photo": "Subir imagen (PNG/JPG)",
        "remove_photo": "Eliminar imagen",
        "photo_saved": "Imagen guardada.",
        "photo_removed": "Imagen eliminada.",
        "invalid_image": "Archivo de imagen no v√°lido.",
        "greet_morning": "Buenos d√≠as",
        "greet_afternoon": "Buenas tardes",
        "greet_evening": "Buenas noches",
        "greet_night": "Buenas noches",
        "spring": "primavera", "summer": "verano", "autumn": "oto√±o", "winter": "invierno",
        "season_greeting": "¬°Feliz {season}!",
        "year_built": "A√±o de construcci√≥n",
        "ownership_transfer_date": "Fecha de transmisi√≥n de la propiedad",
        "balcony": "Balc√≥n",
        "cellar": "S√≥tano",
        "storage_room": "Trastero",
        "garage": "Garaje",
        "parking_spot": "Aparcamiento",
        "owned_by_me": "De mi propiedad",
        "financings": "Financiaciones",
        "financing": "Financiaci√≥n",
        "new_financing": "Nueva financiaci√≥n",
        "edit_delete_financing": "Finalizar / eliminar financiaci√≥n",
        "lender_name": "Prestamista",
        "loan_number": "N√∫mero de pr√©stamo",
        "principal_amount": "Importe del pr√©stamo",
        "interest_rate": "Tipo de inter√©s (%)",
        "repayment_rate": "Amortizaci√≥n (%)",
        "monthly_payment": "Pago mensual",
        "fixed_rate_until": "Tipo fijo hasta",
        "remaining_balance": "Saldo pendiente",
        "purpose": "Finalidad",
        "collateral": "Garant√≠a",
        "select_financing": "Seleccionar financiaci√≥n",
        "end_financing_today": "Finalizar financiaci√≥n (hoy)",
        "delete_financing": "Eliminar financiaci√≥n",



    },
}

def get_lang() -> str:
    lang = st.session_state.get("lang", "de")
    return lang if lang in LANGS else "de"

def set_lang(lang: str):
    if lang in LANGS:
        st.session_state["lang"] = lang

def t(key: str, default: str | None = None) -> str:
    lang = get_lang()
    return TRANSLATIONS.get(lang, {}).get(key, TRANSLATIONS["en"].get(key, default or key))
